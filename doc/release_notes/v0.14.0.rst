*************
Drake v0.14.0
*************

Breaking Changes
----------------

* SDFormat 1.7 backwards-incompatible changes (`#12505`_)

  - Models must have at least one link
  - The model frame is now attached to a link
  - Model frames can no longer reference "world"

Dynamical Systems
-----------------

New features

* Add ability to do full-Newton to implicit integrators (`#12524`_)

Fixes

* Update Simulator's interface for changing integrators (`#12520`_)
* Correct SymbolicVectorSystem "container" population (`#12500`_)
* Change context.FixInputPort() to port.FixValue() (`#12504`_, `#12535`_,
  `#12555`_)

Documentation

* Add high level event documentation (`#12501`_)
* Remove duplicated @name from integrator docs (`#12550`_)

Mathematical Program
--------------------

Fixes

* Check output size in EvaluatorBase (`#10987`_)
* Fix scope_exit deps for snopt_fortran (`#12545`_)

Multibody Dynamics
------------------

New features

* Use Articulated Body Algorithm (ABA) in
  MultibodyPlant::DoCalcTimeDerivatives() (`#12470`_)
* Add drake contact material properties to SDFormat/URDF parsing (`#12491`_)
* Parse the collision filter group for URDFs (`#12495`_)
* Register a geometry frame for all MultibodyPlant bodies (`#12489`_)
* Add ability to construct MultibodyForces before constructing a MultibodyPlant
  (`#12556`_)
* Support ellipsoid rendering (`#12547`_)
* Add graphviz visualization of multibodyplant topology (`#12485`_)
* Support parsing SDFormat 1.7 (`#12505`_). Incorporates the `pose frame
  semantics <https://bit.ly/2ZSl1kH>`_ proposal.

Fixes

* Bug fix warning on unsupported joint limits for continuous models (`#12531`_)
* Fix scalar conversion bug in RevoluteSpring (`#12522`_)
* Pad bounding box volumes to avoid roundoff issues (`#12538`_)
* Confirm that all supported geometries are nominally parsed (`#12541`_)
* Provide more helpful message on joint limit support in MBP (`#12499`_)
* Test parsing of all models reachable via pydrake (URDF / SDFormat) (`#12508`_)
* Hotfix for memory leak in libsdformat's Converter.cc (`#12533`_)

New hydroelastic contact model in progress (still only experimental):

* Collide BVHs using OBB intersection test with callback on the resulting pairs
  (`#12418`_)
* Add LCM messages for traction and slip velocity vectors (`#12471`_)
* Add traction and slip vector visualization for hydroelastic contact
  (`#12493`_)
* Modify parsing semantics for hydroelastics (`#12529`_)

Miscellaneous features and fixes
--------------------------------

Common:

* Add scope_exit class (`#12537`_)
* Remove stale TODOs in common (`#12540`_)

LCM fixes:

* Escape regex characters in DrakeLcm channel names (`#12534`_)
* Clean up DrakeLcm comment/documentation (`#12521`_)

Examples:

* Add planar IIWA URDF and use it in ManipulationStation (`#12502`_)
* Add planar IIWA joint teleop example (`#12503`_)
* Add LCM messaging to the planar-gripper simulation (`#12469`_)

pydrake bindings
----------------

New features

Fixes

* Use np.asarray in gradient and jacobian (`#12511`_)

Newly bound

* pydrake.examples.pendulum.PendulumGeometry (`#12569`_)
* pydrake.examples.manipulation_station.ManipulationStation.SetupPlanarIiwaStation (`#12503`_)
* pydrake.examples.manipulation_station.ManipulationStation.num_iiwa_joints (`#12503`_)
* pydrake.examples.manipulation_station.ManipulationStation.RegisterRgbdSensor (`#12513`_)

Newly-deprecated APIs
---------------------

* drake::multibody::MultibodyPlant default constructor with no arguments
  (`#12525`_)

  - Use constructor with time_step argument explicit specified instead.

* pydrake.multibody.rigid_body_tree.RigidBodyTree.number_of_positions
  (`#12514`_)

  - Use pydrake.multibody.rigid_body_tree.RigidBodyTree.get_num_positions
    instead.

* pydrake.multibody.rigid_body_tree.RigidBodyTree.number_of_velocities
  (`#12514`_)

  - Use pydrake.multibody.rigid_body_tree.RigidBodyTree.get_num_velocities
    instead.

* DRAKE_DEPRECATED in common/drake_nodiscard.h (`#12539`_)

  - Use ``[[nodiscard]]`` directly.

Removal of deprecated APIs
--------------------------

* drake::systems::Simulator::StepTo (`#12515`_)

  - Use drake::systems::Simulator::AdvanceTo instead.

* Bazel label @drake//solvers:mathematical_program_lite (`#12515`_)

  - Use @drake//solvers:mathematical_program instead.

* Attic removals (`#12514`_)

  * DrakeJoint::getNumPositions

    - Use DrakeJoint::get_num_positions instead.

  * DrakeJoint::getNumVelocities

    - Use DrakeJoint::get_num_velocities instead.

  * DrakeJoint::getTransformToParentBody

    - Use DrakeJoint::get_transform_to_parent_body instead.

  * DrakeJoint::getName

    - Use DrakeJoint::get_name instead.

  * DrakeJoint::getPositionName

    - Use DrakeJoint::get_position_name instead.

  * DrakeJoint::getVelocityName

    - Use DrakeJoint::get_velocity_name instead.

  * DrakeJoint::isFloating

    - Use DrakeJoint::is_floating instead.

  * Several overloads of AddModelInstanceFromUrdfString

    - Use more specific overload names.

  * RigidBody::hasParent

    - Use RigidBody::has_parent_body instead.

  * RigidBodyTree::get_number_of_model_instances

    - Use RigidBodyTree::get_num_model_instances instead.

  * RigidBodyTree::getPositionName

    - Use RigidBodyTree::get_position_name instead.

  * RigidBodyTree::getVelocityName

    - Use RigidBodyTree::get_velocity_name instead.

  * RigidBodyTree::findAncestorBodies

    - Use RigidBodyTree::FindAncestorBodies instead.

  * RigidBodyTree::findLinkId

    - Use RigidBodyTree::FindBodyIndex instead.

  * RigidBodyTree::findJointId

    - Use RigidBodyTree::FindIndexOfChildBodyOfJoint instead.

  * RigidBodyTree::get_number_of_bodies

    - Use RigidBodyTree::get_num_bodies instead.

  * RigidBodyTree::number_of_positions

    - Use RigidBodyTree::get_num_positions instead.

  * RigidBodyTree::number_of_velocities

    - Use RigidBodyTree::get_num_velocities instead.

  * RigidBodyTree::bodies

    - Use RigidBodyTree::get_bodies and RigidBodyTree::add_rigid_body instead.

  * RigidBodyTree::frames

    -  Use RigidBodyTree::get_frames and RigidBodyTree::addFrame instead.

  * ``InverseDynamics(const RigidBodyTree<T>*, bool)``

    - Use constructor with InverseDynamicsType instead.

  * InverseDynamics::get_output_port_torque

    - Use InverseDynamics::get_output_port_force instead.

  * InverseDynamicsController::get_robot_for_control

    - Use InverseDynamicsController::get_rigid_body_tree_for_control instead.

.. _#10987: https://github.com/RobotLocomotion/drake/pull/10987
.. _#12418: https://github.com/RobotLocomotion/drake/pull/12418
.. _#12423: https://github.com/RobotLocomotion/drake/pull/12423
.. _#12469: https://github.com/RobotLocomotion/drake/pull/12469
.. _#12470: https://github.com/RobotLocomotion/drake/pull/12470
.. _#12471: https://github.com/RobotLocomotion/drake/pull/12471
.. _#12472: https://github.com/RobotLocomotion/drake/pull/12472
.. _#12474: https://github.com/RobotLocomotion/drake/pull/12474
.. _#12485: https://github.com/RobotLocomotion/drake/pull/12485
.. _#12489: https://github.com/RobotLocomotion/drake/pull/12489
.. _#12491: https://github.com/RobotLocomotion/drake/pull/12491
.. _#12493: https://github.com/RobotLocomotion/drake/pull/12493
.. _#12494: https://github.com/RobotLocomotion/drake/pull/12494
.. _#12495: https://github.com/RobotLocomotion/drake/pull/12495
.. _#12499: https://github.com/RobotLocomotion/drake/pull/12499
.. _#12500: https://github.com/RobotLocomotion/drake/pull/12500
.. _#12501: https://github.com/RobotLocomotion/drake/pull/12501
.. _#12502: https://github.com/RobotLocomotion/drake/pull/12502
.. _#12503: https://github.com/RobotLocomotion/drake/pull/12503
.. _#12504: https://github.com/RobotLocomotion/drake/pull/12504
.. _#12505: https://github.com/RobotLocomotion/drake/pull/12505
.. _#12508: https://github.com/RobotLocomotion/drake/pull/12508
.. _#12510: https://github.com/RobotLocomotion/drake/pull/12510
.. _#12511: https://github.com/RobotLocomotion/drake/pull/12511
.. _#12513: https://github.com/RobotLocomotion/drake/pull/12513
.. _#12514: https://github.com/RobotLocomotion/drake/pull/12514
.. _#12515: https://github.com/RobotLocomotion/drake/pull/12515
.. _#12516: https://github.com/RobotLocomotion/drake/pull/12516
.. _#12517: https://github.com/RobotLocomotion/drake/pull/12517
.. _#12518: https://github.com/RobotLocomotion/drake/pull/12518
.. _#12519: https://github.com/RobotLocomotion/drake/pull/12519
.. _#12520: https://github.com/RobotLocomotion/drake/pull/12520
.. _#12521: https://github.com/RobotLocomotion/drake/pull/12521
.. _#12522: https://github.com/RobotLocomotion/drake/pull/12522
.. _#12524: https://github.com/RobotLocomotion/drake/pull/12524
.. _#12525: https://github.com/RobotLocomotion/drake/pull/12525
.. _#12526: https://github.com/RobotLocomotion/drake/pull/12526
.. _#12529: https://github.com/RobotLocomotion/drake/pull/12529
.. _#12531: https://github.com/RobotLocomotion/drake/pull/12531
.. _#12533: https://github.com/RobotLocomotion/drake/pull/12533
.. _#12534: https://github.com/RobotLocomotion/drake/pull/12534
.. _#12535: https://github.com/RobotLocomotion/drake/pull/12535
.. _#12537: https://github.com/RobotLocomotion/drake/pull/12537
.. _#12538: https://github.com/RobotLocomotion/drake/pull/12538
.. _#12539: https://github.com/RobotLocomotion/drake/pull/12539
.. _#12540: https://github.com/RobotLocomotion/drake/pull/12540
.. _#12541: https://github.com/RobotLocomotion/drake/pull/12541
.. _#12545: https://github.com/RobotLocomotion/drake/pull/12545
.. _#12547: https://github.com/RobotLocomotion/drake/pull/12547
.. _#12549: https://github.com/RobotLocomotion/drake/pull/12549
.. _#12550: https://github.com/RobotLocomotion/drake/pull/12550
.. _#12555: https://github.com/RobotLocomotion/drake/pull/12555
.. _#12556: https://github.com/RobotLocomotion/drake/pull/12556
.. _#12569: https://github.com/RobotLocomotion/drake/pull/12569

..
  Changelog oldest_commit f09a56e68b31b2bd35db66362b0ac3bde638ec67 (inclusive).
  Changelog newest_commit 6cce1fd2620f2247b6c88a879a020fd7ed01c0c6 (inclusive).

Raw Output from relnotes
------------------------

* Add python bindings for PendulumGeometry (`#12569`_)
* doc: Add release notes v0.13.0 (`#12474`_)
* Fixing Mac CI failure (`#12494`_)  # Fix forward on PR #12469 .
* Add Dockerfile for Binder (`#12472`_)
* manipulation: Change context.FixInputPort() to port.FixValue() (`#12504`_)
* perception: Change context.FixInputPort() to port.FixValue() (`#12504`_)
* Fix Binder Dockerfile for Docker versions before 19.03 (`#12510`_)  # Relates #11962 and moby/moby#35018.
* workspace: Move GitHub token filename to command line, not environ (`#12518`_)
* workspace: Upgrade bullet to latest release 2.89 (`#12516`_)
* workspace: Upgrade meshcat to latest commit (`#12516`_)
* workspace: Upgrade semantic_version to latest release 2.8.4 (`#12516`_)
* workspace: Upgrade uritemplate_py to latest release 3.0.1 (`#12516`_)
* setup: Remove ipopt,mumps uninstall on macOS (`#12517`_)
* mkdoc: Fix comment handling edge cases (`#12519`_)
* systems/cleanup: Change context.FixInputPort() to port.FixValue() (`#12535`_)
* Update recommended Bazel version to 2.0 (`#12526`_)
* Textured objects (`#12423`_)  # Previously, the only textured objects allowed were for mesh objects and the texture had to be the same name as the mesh file. This opens the door to applying textures to any of the primitives. Furthermore, the texture can be specified in either URDF or SDF (via a custom drake tag). The textures are used *only* in rendering (RenderEngine*). Currently, arbitrary textures are *not* communicated to drake visualizer. The concept is tested in examples/scene_graph/bouncing_ball_run_dynamics.cc -- the balls now have rainbow textures. Updates MBP so that when a "visual" geometry is introduced, pre-existing ('phong', 'diffuse_map') properties get passed along. Finally, parsing infrastructure was modified to support deferred image validation. (After all, an image can be specified in URDF/SDF but if it isn't consumed in the system, missing the image isn't actually a problem.)
* tools: Error out on now-unsupported --config=snopt_fortran (`#12549`_)  # Instead, use --config=snopt for the same effect.
